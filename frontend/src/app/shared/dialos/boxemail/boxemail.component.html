<div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.5%"
  fxLayoutAlign="center center">
  <div fxFlex="100%" class='wrap'>
    <!-- <div class="spinner" [@loading]="loading">
      <mat-spinner></mat-spinner>
    </div> -->
    <mat-card class="example-card" [@mail]="card_mail">
      <mat-card-header class='subForm'>
        <mat-card-title>
          <mat-form-field>
            <mat-chip-list #chipList>
              <mat-chip *ngFor="let grupo of groupsSelected; let idx=index" [selectable]="selectable"
                [removable]="removable" (removed)="remove(grupo, idx)">
                {{grupo}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input placeholder="Grupo Destinatário" #grupoInput [matAutocomplete]="auto" [matChipInputFor]="chipList"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                (matChipInputTokenEnd)="add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
              <mat-option *ngFor="let grupo of filteredDestination | async" [value]="grupo.contatos">
                {{grupo.nome}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

        </mat-card-title>
        <mat-card-subtitle>
          <div style='overflow-wrap: break-word;margin-bottom: 10px'>
            <p>Destinatários:</p>
            <span *ngFor="let email of formulario.get('to').value">{{email}}; </span>
          </div>
          <div>
            <p>Assunto:
              <span style="margin-left:20px">
                <input style="display:inline-block;" matInput [value]="data.assunto" readonly>
              </span>
            </p>
          </div>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        
        <ejs-richtexteditor #RTE id='defaultRTE' (created)='onCreate()' [toolbarSettings]='tools' [(value)]='data.body' *ngIf="data?.allowEditText">
        </ejs-richtexteditor>

        <div [innerHTML]="data.body | safeHtml" style='width:600px;margin:0 auto' #teste *ngIf="!data?.allowEditText"></div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button (click)="sendEmail()">Enviar</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>